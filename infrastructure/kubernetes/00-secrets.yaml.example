# ⚠️ SECRETS KUBERNETES - CONFIGURATION SÉCURISÉE
#
# IMPORTANT: Ce fichier NE DOIT JAMAIS être commité avec des vraies valeurs!
#
# ## Génération des secrets sécurisés:
# ```bash
# # Générer un mot de passe fort
# openssl rand -base64 32
#
# # Encoder en base64 pour Kubernetes
# echo -n "votre_secret" | base64
# ```
#
# ## Pour la production, utiliser:
# - Sealed Secrets (bitnami-labs/sealed-secrets)
# - External Secrets Operator
# - HashiCorp Vault
# - Cloud Provider Secret Manager (AWS/Azure/GCP)

---
apiVersion: v1
kind: Namespace
metadata:
  name: medisecure
  labels:
    name: medisecure
    security: high

---
# PostgreSQL (Service Patient)
apiVersion: v1
kind: Secret
metadata:
  name: postgres-secret
  namespace: medisecure
  labels:
    app: postgres
    tier: database
type: Opaque
data:
  POSTGRES_USER: bWVkaXNlY3VyZV91c2Vy
  POSTGRES_PASSWORD: Q0hBTkdFX01FX1dJVEhfU1RST05HX1BBU1NXT1JE
  POSTGRES_DB: bWVkaXNlY3VyZV9wYXRpZW50cw==

---
# MongoDB (Service RDV)
apiVersion: v1
kind: Secret
metadata:
  name: mongodb-secret
  namespace: medisecure
  labels:
    app: mongodb
    tier: database
type: Opaque
data:
  MONGO_ROOT_USERNAME: bWVkaXNlY3VyZV9hZG1pbg==
  MONGO_ROOT_PASSWORD: Q0hBTkdFX01FX1dJVEhfU1RST05HX1BBU1NXT1JE

---
# MariaDB (Service Billing)
apiVersion: v1
kind: Secret
metadata:
  name: mariadb-secret
  namespace: medisecure
  labels:
    app: mariadb
    tier: database
type: Opaque
data:
  MYSQL_ROOT_PASSWORD: Q0hBTkdFX01FX1JPT1RfUEFTU1dPUkQ=
  MYSQL_USER: bWVkaXNlY3VyZV9iaWxsaW5n
  MYSQL_PASSWORD: Q0hBTkdFX01FX1dJVEhfU1RST05HX1BBU1NXT1JE
  MYSQL_DATABASE: bWVkaXNlY3VyZV9iaWxsaW5n

---
# MinIO (Service Documents)
apiVersion: v1
kind: Secret
metadata:
  name: minio-secret
  namespace: medisecure
  labels:
    app: minio
    tier: storage
type: Opaque
data:
  MINIO_ROOT_USER: bWVkaXNlY3VyZV9hZG1pbg==
  MINIO_ROOT_PASSWORD: Q0hBTkdFX01FX01JTklPX1BBU1NfTUlOXzEyX0NIQVJT

---
# Redis (Cache)
apiVersion: v1
kind: Secret
metadata:
  name: redis-secret
  namespace: medisecure
  labels:
    app: redis
    tier: cache
type: Opaque
data:
  REDIS_PASSWORD: Q0hBTkdFX01FX1JFRElTX1BBU1NXT1JE

---
# RabbitMQ (Message Queue)
apiVersion: v1
kind: Secret
metadata:
  name: rabbitmq-secret
  namespace: medisecure
  labels:
    app: rabbitmq
    tier: messaging
type: Opaque
data:
  RABBITMQ_DEFAULT_USER: bWVkaXNlY3VyZQ==
  RABBITMQ_DEFAULT_PASS: Q0hBTkdFX01FX1JBQkJJVE1RX1BBU1NXT1JE

---
# Keycloak (Authentication)
apiVersion: v1
kind: Secret
metadata:
  name: keycloak-secret
  namespace: medisecure
  labels:
    app: keycloak
    tier: auth
type: Opaque
data:
  KEYCLOAK_ADMIN: YWRtaW4=
  KEYCLOAK_ADMIN_PASSWORD: Q0hBTkdFX01FX0tFWUNMT0FLX0FETUlOX1BBU1M=
  KC_DB_USERNAME: a2V5Y2xvYWtfdXNlcg==
  KC_DB_PASSWORD: Q0hBTkdFX01FX0tFWUNMT0FLX0RCX1BBU1M=

---
# Kong (API Gateway)
apiVersion: v1
kind: Secret
metadata:
  name: kong-secret
  namespace: medisecure
  labels:
    app: kong
    tier: gateway
type: Opaque
data:
  KONG_PG_USER: a29uZw==
  KONG_PG_PASSWORD: Q0hBTkdFX01FX0tPTkdfREJfUEFTU1dPUkQ=

---
# Application Secrets (Services)
apiVersion: v1
kind: Secret
metadata:
  name: app-secrets
  namespace: medisecure
  labels:
    tier: application
type: Opaque
data:
  # JWT Secret Key (min 32 chars)
  JWT_SECRET_KEY: Q0hBTkdFX01FX0pXVF9TRUNSRVRfS0VZXzMyX0NIQVJTX01JTl9SRVFVSVJFRA==
  
  # Data Encryption Key (AES-256)
  ENCRYPTION_KEY: Q0hBTkdFX01FX0VOQ1JZUFRJT05fS0VZXzI1Nl9CSVRT
  
  # API Internal Key
  INTERNAL_API_KEY: Q0hBTkdFX01FX0lOVEVSTkFMX0FQSV9LRVk=

---
# TLS Certificate (HTTPS)
apiVersion: v1
kind: Secret
metadata:
  name: tls-cert
  namespace: medisecure
  labels:
    tier: security
type: kubernetes.io/tls
data:
  # Remplacer par vos certificats réels
  # Générer avec: openssl req -x509 -nodes -days 365 -newkey rsa:2048 -keyout tls.key -out tls.crt
  tls.crt: LS0tLS1CRUdJTiBDRVJUSUZJQ0FURS0tLS0t...
  tls.key: LS0tLS1CRUdJTiBSU0EgUFJJVkFURSBLRVktLS0tLQ==...
